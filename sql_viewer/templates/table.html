{# Macros #}
{% from "_macros.html" import table_schema, sql_editor, database_navbar %}

{# Base template #}
{% extends "base.html" %}

{# Body #}
{% block title %}
SQL Viewer | {{ tablename }}
{% endblock %}

{% block content %}
<main class="flex h-screen">
  {{ database_navbar(database_schema, tablename) }}
  <div class="w-[calc(100vw-24rem)] overflow-auto flex flex-col">
    {# sql_editor() #}
    <div class="h-[calc(100vh-3rem)] overflow-auto bg-[#121212]">
      <table class="w-full text-sm relative">
        <thead class="border-b border-[#323232] sticky top-0">
          <tr class="bg-[#121212] text-left">
            {% for column_name in entries.schema %}
            <th class="py-2 px-4 transition hover:bg-[#323232]">
              {{ column_name }}
            </th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for item in entries.results %}
          <tr class="{{ 'bg-[#161616]' if loop.index0 % 2 == 0 else 'bg-[#121212]' }}">
            {% for value in item %}
            <td class="py-2 px-4 truncate hover:bg-[#323232]">{{ value }}</td>
            {% endfor %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="border-t border-[#323232] px-4 h-[3rem] flex items-center justify-between">
      <p><b>Time:</b> {{ "%.5f"|format(time) }}s</p>
      <p><b>Items:</b> {{ items }}</p>
    </div>
  </div>
</main>
{% endblock %}